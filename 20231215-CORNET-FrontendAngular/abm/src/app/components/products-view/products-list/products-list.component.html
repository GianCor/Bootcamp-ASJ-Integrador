<div class="mb-5">
  <h3>Listado de productos</h3>
</div>
  <div class="d-flex mb-2 justify-content-between mb-3">
    <div>
      <input class="form-control form-control-sm" type="text" placeholder="Buscar" name="search" [(ngModel)]="search" />
    </div>
    <div class="btn-group btn-group-sm">
      <button type="button" class="btn btn-outline-primary" (click)="sortByPriceAsc = !sortByPriceAsc; sortByPriceDesc = false;" [ngClass]="{'active': sortByPriceAsc}">Ordenar Por Mayor Precio</button>
      <button type="button" class="btn btn-outline-primary" (click)="sortByPriceDesc = !sortByPriceDesc; sortByPriceAsc = false;" [ngClass]="{'active': sortByPriceDesc}">Ordenar Por Menor Precio</button>
    </div>
    <div>
      <select name="selectedCategory" class="form-select" id="selectedCategory" [(ngModel)]="selectedCategory">
        <option [ngValue]="''">Todas las categorías</option>
        <option *ngFor="let category of categoryData" [ngValue]="category">{{category.name}}</option>
      </select>
    </div>
    <button class="btn btn-primary btn-sm mx-3" [routerLink]="['/products/add']"><div class="d-flex justify-content-center align-items-center"><mat-icon>add</mat-icon> Agregar Producto</div></button>
  </div>
  <div *ngIf="productsData.length == 0" class="alert alert-primary m-5" role="alert">
    Parece que no hay datos cargados
  </div>
<div class="table-responsive" *ngIf="show" style="max-height: 500px;">
  <table
    class="table table-hover table-striped table-bordered mb-5"
    id="productos-body"
  >
    <thead>
      <tr>
        <th scope="col">Nombre Producto</th>
        <th scope="col">SKU</th>
        <th scope="col">Código de Proveedor</th>
        <th scope="col">Razón social del Proveedor</th>
        <th scope="col">Categoria</th>
        <th scope="col">Descripcion</th>
        <th scope="col">Precio</th>
        <th scope="col">Editar/Eliminar</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of productsData | sortBy:'name' | search: search | sortByPrice : sortByPriceAsc | sortByPriceDesc : sortByPriceDesc | filterByCategory:selectedCategory">
        <td scope="col">{{ product.name }}</td>
        <td scope="col">{{ product.sku }}</td>
        <td scope="col">{{ product.supplier_id }}</td>
        <td scope="col">{{ product.supplierName }}</td>
        <td scope="col">{{ product.category.name }}</td>
        <td scope="col">{{ product.description }}</td>
        <td scope="col">{{ product.price | currency }}</td>
        <td scope="col">
          <div class="d-flex justify-content-center align-items-center">
            <div class="btn-group btn-group-sm ">
              <button class="btn btn-outline-warning" (click)="editProduct(product)"><mat-icon>mode_edit_icon</mat-icon></button>
              <button class="btn btn-outline-danger" (click)="deleteProduct(product)"><mat-icon>delete</mat-icon></button>
            </div>
          </div>

        </td>
      </tr>
    </tbody>
  </table>
</div>
